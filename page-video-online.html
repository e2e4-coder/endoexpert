<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />

    <title>Видео online</title>

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i&amp;subset=cyrillic" rel="stylesheet">

    <link rel="stylesheet" href="/local/assets/css/normalize.css">
    <link rel="stylesheet" href="/local/assets/fonts/fonts.css">
    <link rel="stylesheet" href="/local/assets/local/lib/frontend/swiper/css/swiper.min.css">
    <link rel="stylesheet" href="/local/assets/local/lib/frontend/tooltipster/css/tooltipster.bundle.min.css">
    <link rel="stylesheet" href="/local/assets/local/lib/frontend/tooltipster/css/plugins/tooltipster/sideTip/themes/tooltipster-sideTip-shadow.min.css">
    <link rel="stylesheet" href="/local/assets/local/lib/frontend/fontawesome-free-5.9.0-web/css/all.min.css">
    <link rel="stylesheet" href="/local/assets/local/lib/frontend/hc-offcanvas-nav/dist/hc-offcanvas-nav.css">
    <link rel="stylesheet" href="/local/assets/local/lib/frontend/Magnific-Popup/dist/magnific-popup.css">
    <link rel="stylesheet" href="/local/assets/local/lib/frontend/jquery-bar-rating/themes/css-stars.css">


    <link rel="stylesheet" href="/local/assets/css/build.css">


    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js"></script>
    <script src="/local/assets/local/lib/frontend/swiper/js/swiper.min.js"></script>
    <script src="/local/assets/local/lib/frontend/hc-offcanvas-nav/dist/hc-offcanvas-nav.js"></script>
    <script src="/local/assets/local/lib/frontend/tooltipster/js/tooltipster.bundle.min.js"></script>
    <script src="/local/assets/local/lib/frontend/imask.js"></script>
    <script src="/local/assets/local/lib/frontend/Magnific-Popup/dist/jquery.magnific-popup.min.js"></script>
    <script src="/local/assets/local/lib/frontend/jquery-bar-rating/jquery.barrating.min.js"></script>



    <link href="https://vjs.zencdn.net/7.7.5/video-js.css" rel="stylesheet" />
    <script src="https://vjs.zencdn.net/7.7.5/video.js"></script>
    <script src="/local/assets/local/lib/frontend/Youtube.min.js"></script>


    <script src="/local/assets/js/ee-login-auth-block.js"></script>

    <script src="/local/assets/js/common.js"></script>
    <script src="/local/assets/js/page_video_online.js"></script>





</head>
<body style="background: #101011;">

<div class="page-wrapper">



    <div class="endoexpert-header">

        <div class="header-top">

            <div class="header-wrapper">
                <div class="left-buttons">

                    <a class="-share" href="#">5</a>
                    <a class="-comments" href="#">41</a>
                    <a class="-notify" href="#">78</a>

                    <a class="-add-to-favorite" href="#" title="Добавить в избранное"></a>
                    <a class="-add-to-learn" href="#" title="Добавить для изучения"></a>

                </div>

                <div class="right-buttons">

                    <a class="button-add-publication -red" href="#">Сегодня онлайн</a>

                    <span class="button-wrapper -no-border">
                        <a class="-settings" href="#">Управление</a>
                    </span>

                    <span class="button-wrapper">
                        <a class="-user" href="#">Дмитриенко Георгий Петрович</a>
                    </span>

                    <span class="button-wrapper">
                        <a href="#">Выйти</a>
                    </span>


                </div>
            </div>

        </div>

        <div class="header-body">

            <div class="header-wrapper">

                <div class="header-logo">
                    <div class="logo-wrapper">
                        <a href="/"><img src="/local/assets/img/endoexpert_logo_color.png" width="53" height="38"></a>
                    </div>

                </div>

                <div class="main-menu">

                    <ul>
                        <li><a href="/katalogi/">Каталоги</a></li>
                        <li><a href="/sobytiya/">События</a>
                            <ul>
                                <li><a href="/sobytiya/">Предстоящие события</a></li>
                                <li><a href="/sobytiya/arkhiv/">Архив</a></li>
                            </ul>
                        </li>
                        <li><a href="/novosti/">Новости</a></li>
                        <li><a href="/biblioteka/">Библиотека</a>
                            <ul>
                                <li><a href="/biblioteka/oborudovanie/">ОБОРУДОВАНИЕ</a></li>
                            </ul>
                        </li>
                        <li><a href="/patsientam/">Пациентy</a></li>
                        <li><a href="/forum/">Форум</a></li>
                        <li><a href="https://endoexpert.ru/biblioteka/obuchenie/obrazovatelnye-programmy-po-endoskopii-i-gastroenterologii-dlya-vrachey/quacol-kachestvennaya-kolonoskopiya-obrazovatelnyy-proekt/">QuaCol</a></li>

                    </ul>

                </div>

                <div class="search-block">

                    <form action="/search/" role="search">

                        <input type="text" name="q" value="" placeholder="Поиск...">




                    </form>

                </div>

            </div>

        </div>




    </div>

    <div class="ee-inner-page page-default page-video-online">

        <div class="wrapper-1050">

            <div class="ee-main-wrapper">

                <div class="ee-breadcrumbs">
                    <a href="#">Главная</a> ► <a href="#">События</a> ► <a href="#">Архив</a> ► <span>Рубрика</span>
                </div>

                <h1>ОНЛАЙН ВСЕРОССИЙСКАЯ НАУЧНО-ПРАКТИЧЕСКАЯ КОНФЕРЕНЦИЯ С МЕЖДУНАРОДНЫМ УЧАСТИЕМ, ПОСВЯЩЕННАЯ 80-ЛЕТИЮ ЧЕЛЯБИНСКОЙ ОБЛАСТНОЙ КЛИНИЧЕСКОЙ БОЛЬНИЦЫ</h1>


                <p>Для просмотра видео нужно <a href="#">зарегистрироваться</a> или <a href="#">авторизоваться</a>.</p>


                <button type="button" onclick="showPopup({src:'#popup-1'})">Попап о неполноте данных</button>

                <div id="popup-1" class="ee-popup mfp-hide">

                    <div class="popup-body">


                        <p>Глубокоуважаемый коллега, Ваши данные в системе неполные. Вы сможете перейти к просмотру прямо сейчас закрыв это сообщение нажав на крестик справа.</p>

                        <p>Просим Вас ввести недостающие или изменившиеся данные в ближайшие 2 дня в удобное для Вас время пройдя по <a href="#">этой ссылке</a> или из письма, которое мы уже выслали Вам на почту.

                        <p>Это делается всего 1 раз, необходимо для беспрепятственного доступа к «нашим» трансляциям, возможного начисления баллов и для обязательных отчетов организаторов.</p>


                    </div>

                </div>


                <div class="video-player-wrapper">

                    <div class="ee-fake-video-player" style="background-image: url('/local/assets/img/tmp/video_poster.jpg')">

                        <!--<a href="#"><div class="play-button"></div></a>-->

                        <div class="ee-fake-video-player__login-auth-wrapper ee-fake-video-player__login-auth-wrapper--auth-only">

                            <a href="#auth1" class="ee-fake-video-player__play-button"></a>

                            <div class="ee-login-auth-block">

                                <div class="ee-login-auth-block__row">


                                    <div class="ee-login-auth-block__col">

                                        <a name="auth1"></a>

                                        <div class="ee-login-auth-block__title">Авторизация</div>

                                        <form class="ee-form -small">

                                            <div class="form-item">
                                                <input name="" class="form-text -required" placeholder="Login (e-mail) *">
                                            </div>

                                            <div class="form-item">
                                                <input name="" class="form-text -required" type="password" placeholder="Password *">
                                            </div>

                                            <div class="form-actions">
                                                <button type="submit" class="ee-button-3">Авторизация</button>

                                                <div class="form-links">
                                                    <a href="#">Восстановаить пароль</a>
                                                    <br>
                                                    <a href="#">Регистрация</a>
                                                </div>
                                            </div>





                                        </form>


                                    </div>

                                </div>



                            </div>

                        </div>


                    </div>


                </div>

                <br><br><br>

                <div class="video-player-wrapper">

                    <div class="ee-fake-video-player" style="background-image: url('/local/assets/img/tmp/video_poster.jpg')">

                        <!--<a href="#"><div class="play-button"></div></a>-->

                        <div class="ee-fake-video-player__login-auth-wrapper">

                            <a href="#reg1" class="ee-fake-video-player__play-button"></a>

                            <div class="ee-login-auth-block">

                                <div class="ee-login-auth-block__row">

                                    <div class="ee-login-auth-block__col">

                                        <a name="reg1"></a>

                                        <div class="ee-login-auth-block__title">Регистрация</div>

                                        <p class="ee-login-auth-block__description">Для новых пользователей.</p>

                                        <form class="ee-form -small">

                                            <div class="form-item">
                                                <input name="" class="form-text -required" placeholder="Фамилия *">
                                            </div>

                                            <div class="form-item">
                                                <input name="" class="form-text -required" placeholder="Имя *">
                                            </div>

                                            <div class="form-item">
                                                <input name="" class="form-text -required" placeholder="Отчество *">
                                            </div>

                                            <div class="form-item">
                                                <label class="ee-checkbox-4"><input class="-required" checked="" type="checkbox"><span>Согласен на обработку, на передачу своих персональных данных (организаторам мероприятия) в любой форме, включая трансграничную передачу, в соответствии с Федеральным законом <a href="#" target="_blank">«О персональных данных» № 152-ФЗ от 27.7.2006	*</a></span></label>
                                            </div>

                                            <div class="form-item">

                                                <div class="select-wrapper">
                                                    <select name="" class="form-select -required">
                                                        <option value="">- Выберите страну -</option>
                                                        <option>Option 1</option>
                                                        <option>Option 2</option>
                                                        <option>Option 3</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="form-item">

                                                <div class="select-wrapper">
                                                    <select name="" class="form-select -required">
                                                        <option value="">- Выберите город -</option>
                                                        <option>Option 1</option>
                                                        <option>Option 2</option>
                                                        <option>Option 3</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="form-item">
                                                <input name="" class="form-text -required" placeholder="Место работы *">
                                            </div>

                                            <div class="form-item">

                                                <div class="select-wrapper">
                                                    <select name="" class="form-select -required">
                                                        <option value="">- Выберите специальность -</option>
                                                        <option>Option 1</option>
                                                        <option>Option 2</option>
                                                        <option>Option 3</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="form-item">
                                                <input name="" class="form-text -required" placeholder="Телефон *">
                                            </div>

                                            <div class="form-item">
                                                <input name="" class="form-text -required" placeholder="E-mail *">
                                            </div>

                                            <div class="form-actions">
                                                <button type="submit" class="ee-button-3">Регистрация</button>
                                            </div>

                                        </form>

                                    </div>

                                    <div class="ee-login-auth-block__col">

                                        <div class="ee-login-auth-block__title" style="color: lightgreen">Авторизация</div>

                                        <p class="ee-login-auth-block__description">Вы уже регистрировались ранее? Для доступа необходимо пройти процедуру авторизации.</p>

                                        <form class="ee-form -small">

                                            <div class="form-item">
                                                <input name="" class="form-text -required" placeholder="Login (e-mail) *">
                                            </div>

                                            <div class="form-item">
                                                <input name="" class="form-text -required" type="password" placeholder="Password *">
                                            </div>

                                            <div class="form-actions">
                                                <button type="submit" class="ee-button-3">Авторизация</button>
                                            </div>



                                        </form>


                                        <div class="ee-lock-code">
                                            <input id="lock-code" type="text">

                                        </div>

                                        <script>
                                          $(document).ready(function () {

                                            IMask(
                                                document.getElementById('lock-code'),
                                                {
                                                  mask: '000000',
                                                  lazy : false
                                                }
                                            );

                                          });
                                        </script>

                                    </div>

                                </div>



                            </div>

                        </div>


                    </div>


                </div>

                <br><br><br>

                <a name="player"></a>

                <div class="video-player-wrapper">

                    <div class="ee-video-player">

                        <video
                                id="my-video"
                                class="video-js"
                                controls
                                preload="auto"
                                width="640"
                                height="264"
                                poster="/local/assets/img/tmp/video_poster.jpg"
                                data-youtube-src="https://www.youtube.com/embed/8T9SFZDP60Q"
                                data-api-url="/local/assets/json/get-one.json"
                                data-ws-url="wss://echo.websocket.org"
                                data-stat-interval="5000"
                                data-confirm-interval="1"
                                data-user-id="12345"
                                data-video-id="54321"
                                data-counter-start="7"
                                data-vote-popup-time="2020-09-20 09:00:00"

                        >

                            <source src="/local/assets/mp4/file_example_MP4_1920_18MG.mp4" type="video/mp4" />

                            <p class="vjs-no-js">
                                To view this video please enable JavaScript, and consider upgrading to a
                                web browser that
                                <a href="https://videojs.com/html5-video-support/" target="_blank"
                                >supports HTML5 video</a
                                >
                            </p>
                        </video>

                        <div class="ee-video-player__overlay-banner" style="display: none">

                            Тут можно вставить любой контент...

                        </div>

                    </div>

                    <div class="ee-time-counter" id="time-counter">

                        <div class="counter-label">Учёт присутствия</div>

                        <div class="counter-digits">
                            <span class="d1">0</span>
                            <span class="d2">0</span>
                            <span class="d3">0</span>
                            <span class="d4">0</span>
                            <div class="hours-label">часов</div>
                            <div class="minutes-label">минут</div>
                        </div>

                    </div>

                    <i title="Ссылка скопирована в буфер" class="ico-link" data-link="http://endo.sommet-test.ru/page-video-online.html#player"></i>


                </div>


                <div id="confirm-popup" class="ee-popup mfp-hide">

                    <div class="popup-header">
                        Подтвердите Ваше присутствие
                    </div>

                    <div class="popup-body">

                        <p>Какой-то текст...</p>

                    </div>

                    <div class="popup-footer ">

                        <div class="footer-buttons">

                            <button id="confirm-watching" class="ee-button-7">Подтвердить</button>

                        </div>

                    </div>




                </div>

                <div id="vote-popup" class="ee-popup mfp-hide">

                    <form id="vote-popup-form" action="/local/assets/json/post-rating.json">

                        <input type="hidden" name="video_id" value="234234">

                        <div class="popup-header">
                            Оцените трансляцию
                        </div>

                        <div class="popup-body">

                            <div class="ee-vote-popup-form">

                                <div class="ee-vote-popup-form__item">

                                    <select title="Оцените трансляцию" name="vote">
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                    </select>
                                </div>

                                <div class="ee-vote-popup-form__item">

                                    <textarea name="comment" placeholder="Ваш комментарий"></textarea>
                                </div>



                            </div>



                        </div>

                        <div class="popup-footer ">

                            <div class="footer-buttons">

                                <button type="submit" class="ee-button-7">ОК</button>

                            </div>

                        </div>

                    </form>




                </div>


                <script>


                  $(document).ready(function () {



                    var options = {
                      "playbackRates": [0.5, 1, 1.5, 2],
                      "techOrder": ["youtube"], "sources": [{ "type": "video/youtube", "src": $('#my-video').data('youtube-src')}]
                    };

                    var player = videojs('my-video', options, function onPlayerReady() {

                      var player = this;
                      var $el = $(this.el_);

                      var apiUrl = $el.data('api-url');
                      var userId = $el.data('user-id');
                      var videoId = $el.data('video-id');
                      var statInterval = $el.data('stat-interval');
                      var confirmInterval = $el.data('confirm-interval') * 60 * 1000;

                      var wsUrl = $el.data('ws-url');

                      var ws = new WebSocket(wsUrl);

                      var votePopupTime = $el.data('vote-popup-time');
                      var canShowVotePopup = !!votePopupTime;

                      var votePopupTimeType = votePopupTime && votePopupTime.toString().indexOf('-') > 0 ? 'date' : 'seconds';


                      if (votePopupTimeType === 'date') {

                          votePopupTime = new Date(votePopupTime);

                      }


                      var confirmTimeout;


                      var canSendTimeUpdateEvent = false;

                      var popupSound = new Audio('/bitrix/js/im/audio/new-message-1.mp3');



                      $el.find('.vjs-control-bar').css('z-index', 999);

                      var $overlayBanner = $el.next('.ee-video-player__overlay-banner');

                      $overlayBanner.appendTo($el);

                      var duration = 0;

                      this.on('play', function() {

                        duration = player.duration();

                        $overlayBanner.fadeOut();

                        confirmTimeout = setTimeout(showConfirmPopup, confirmInterval);

                        $el.prepend('<div class="ee-video-js-overlay"></div>');

                        sendVideoStats('play', {});

                        setInterval(function () {

                          canSendTimeUpdateEvent = true;

                        }, statInterval);


                      });

                      this.on('stop', function() {

                        $overlayBanner.show();

                        clearTimeout(confirmTimeout);

                        sendVideoStats('stop', {});


                      });

                      this.on('pause', function() {

                        $overlayBanner.show();

                        clearTimeout(confirmTimeout);


                        sendVideoStats('pause', {});


                      });


                      this.on('timeupdate', function(e,ee) {




                        if (canShowVotePopup) {

                            if (votePopupTimeType === 'date' && Date.now() > votePopupTime || votePopupTimeType === 'seconds' && duration && duration - player.currentTime() < votePopupTime) {

                                showVotePopup();
                                canShowVotePopup = false;
                            }


                        }

                        if (canSendTimeUpdateEvent) {

                          sendVideoStats('timeupdate', {currentTime: player.currentTime()});
                          canSendTimeUpdateEvent = false;

                        }


                      });


                      $('#vote-popup-form').submit(function (e) {

                          e.preventDefault();

                          $.post($(this).attr('action'), $(this).serialize());

                          $.magnificPopup.close();

                          return false;


                      });


                      $('#confirm-watching').click(function () {

                          player.play();

                          $.magnificPopup.close();

                          sendVideoStats('confirm', {currentTime: player.currentTime()});

                          confirmTimeout = setTimeout(showConfirmPopup, confirmInterval);


                      });


                      function sendVideoStats(event, data) {


                        /*
                        $.post(apiUrl, {
                          event: event,
                          videoId: videoId,
                          userId: userId,
                          data:data
                        });
                        */

                        ws.send(JSON.stringify({
                          event: event,
                          videoId: videoId,
                          userId: userId,
                          data:data
                        }));




                      }

                      function showConfirmPopup() {

                          player.pause();
                          popupSound.play();

                          if ($(window).width() <= 768) {document.exitFullscreen()};

                          showPopup({src:'#confirm-popup', modal: true, prependTo: document.getElementById('my-video')});



                      }

                      function showVotePopup() {

                          $('.ee-vote-popup-form select').barrating({
                              theme: 'fa-stars-gold2',
                              initialRating: 0,
                              readonly: false,
                              allowEmpty: true,
                              emptyValue: 0,
                          });


                          popupSound.play();



                          showPopup({
                              src: '#vote-popup',
                              modal: false,
                              prependTo: document.getElementById('my-video')
                          });


                      }

                    });



                    $('.ico-link').click(function () {


                      copyToClipboard($(this).data('link') ? $(this).data('link') : window.location.href);


                    }).tooltipster({
                      animation: 'fade',
                      delay: 200,
                      theme: 'tooltipster-punk',
                      trigger: 'click',
                      timer: 2000
                    });



                    var $timeCounter = $('#time-counter');

                    var minutesCount = $(player.el_).data('counter-start');
                    setTime(minutesCount);

                    setInterval(function () {

                      if (!player.paused()) {

                        setTime(++minutesCount);

                      }

                    }, 60000);


                    function setTime(t) {

                      var minutes = (t % 60).toString();

                      $timeCounter.find('.d4').text(minutes.slice(-1));
                      $timeCounter.find('.d3').text(minutes.length > 1 ? minutes.slice(0, 1) : 0);

                      var hours = Math.floor(t / 60).toString();

                      $timeCounter.find('.d2').text(hours.slice(-1));
                      $timeCounter.find('.d1').text(hours.length > 1 ? hours.slice(0, 1) : 0);

                    }

                  });

                </script>




                <h2>Youtube API test</h2>

                <div id="video-placeholder"></div>

                <script src="https://www.youtube.com/iframe_api"></script>

                <script>
                  var player;

                  function onYouTubeIframeAPIReady() {
                    player = new YT.Player('video-placeholder', {
                      width: 600,
                      height: 400,
                      videoId: 'HeuhlSohSEE',
                      playerVars: {
                        autoplay: 0,
                        controls: 0,
                        showinfo:0

                      },
                      events: {
                       // onReady: initialize
                      }
                    });
                  }
                </script>













            </div>


        </div>


    </div>




</div>
</body>
</html>

